(function(t){function e(e){for(var r,s,a=e[0],c=e[1],u=e[2],h=0,f=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"16e7":function(t,e,n){},2389:function(t,e,n){"use strict";var r=n("fdbd"),i=n.n(r);i.a},"42c6":function(t,e,n){},"4b44":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("header",t._l(t.tabs,(function(e){return n("div",{key:e.id},[n("TopbarTab",{attrs:{tab:e,isActive:t.activeTabID===e.id},on:{switch:function(n){t.activeTabID=e.id}}})],1)})),0),n("main",[n("Queue",{attrs:{queue:t.queue.q,isShown:t.activeTabID===t.tabs.Queue.id,currentSongQID:t.currentSongQID},on:{goto:function(e){return t.goto(e)}}}),n("Search",{attrs:{isShown:t.activeTabID===t.tabs.Search.id}})],1),n("PlayerMin",{key:t.a,attrs:{isShown:t.currentSongQID>-1,currentSong:t.currentSong,currentSongInfo:t.currentSongInfo},on:{toggle:t.toggle,upd:t.playerUpdate}})],1)},o=[],s=(n("d3b7"),n("96cf"),n("1da1")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{class:{active:t.isActive},on:{click:function(e){return t.$emit("switch")}}},[t._v(" "+t._s(t.tab.name)+" ")])},c=[],u={name:"TopbarTab",props:{tab:Object,isActive:Boolean}},l=u,h=(n("6bc6"),n("2877")),f=Object(h["a"])(l,a,c,!1,null,"33e45e72",null),p=f.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{shown:t.isShown},attrs:{id:"queue"}},t._l(t.queue,(function(e){return n("div",{key:e.qid},[n("SongTile",{attrs:{song:e,isPlaying:t.currentSongQID===e.qid},on:{play:function(n){return t.$emit("goto",e.qid)}}})],1)})),0)},g=[],v=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"song-tile",class:{"song-active":t.isPlaying},on:{click:function(e){return t.$emit("play")}}},[n("a",{staticClass:"song-info"},[n("h4",{staticClass:"song-title"},[t._v(t._s(t.song.name))]),n("h6",{staticClass:"song-artist"},[t._v(t._s(t.song.artist))])])])}),b=[],S={name:"SongTile",props:{song:Object,isPlaying:Boolean}},m=S,y=(n("af88"),Object(h["a"])(m,v,b,!1,null,"6e92b22c",null)),w=y.exports,_={name:"Queue",components:{SongTile:w},props:{isShown:Boolean,queue:Array,currentSongQID:Number}},O=_,T=(n("ac69"),Object(h["a"])(O,d,g,!1,null,"548724f2",null)),q=T.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{shown:t.isShown},attrs:{id:"search"}},[n("input",{attrs:{id:"search-bar",type:"text",placeholder:"Search music..."}})])},x=[],I={name:"Search",props:{isShown:Boolean}},P=I,Q=(n("2389"),Object(h["a"])(P,j,x,!1,null,"3c6b320f",null)),C=Q.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"player-minimized",class:{shown:t.isShown}},[n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"progress",style:{width:t.progress}})]),n("div",{staticClass:"song"},[n("div",{staticClass:"song-info"},[n("h4",{staticClass:"song-title"},[t._v(t._s(t.currentSongInfo.name))]),n("h6",{staticClass:"song-artist"},[t._v(t._s(t.currentSongInfo.artist))])]),n("div",{staticClass:"song-control",on:{click:function(e){return t.$emit("toggle")}}},[n("i",{staticClass:"material-icons"},[t._v(t._s(t.action))])])])])},D=[],E={name:"PlayerMin",props:{isShown:Boolean,currentSong:HTMLAudioElement,currentSongInfo:Object},created:function(){var t=this;this.currentSong.addEventListener("timeupdate",(function(){return t.$emit("upd")}))},computed:{progress:function(){var t=this.currentSong;return t.currentTime/t.duration*100+"%"},action:function(){return this.currentSong.paused?"play_arrow":"pause"}}},$=E,A=(n("bccc"),Object(h["a"])($,k,D,!1,null,"618fd0b0",null)),M=A.exports;n("38cf");function R(){this.q=[],this.count=0,this.repeat=0,this.shuffle=!1,this.get=function(t){return this.q[t]},this.push=function(t){t.qid=this.count++,this.q.push(t)},this.prev=function(){switch(console.log("prev"),this.repeat){case-1:case 1:this.repeat=0;case 0:this.goto(this.get(this.q.length-1).qid)}},this.next=function(){var t=this.q.shift();switch(this.repeat){case-1:return;case 1:this.repeat=0;case 0:this.q.push(t)}},this.goto=function(t){while(this.get(0).qid!=t)this.next()},this.moveon=function(){-1!==this.repeat&&0!==this.repeat||this.next()}}var U={name:"app",components:{TopbarTab:p,Queue:q,Search:C,PlayerMin:M},data:function(){return{PROTO:"http://",ROUTE:"f1d3263c.ngrok.io",tabs:{Queue:{id:0,name:"Queue"},Search:{id:1,name:"Search"}},activeTabID:0,currentSongQID:-1,currentSong:new Audio,currentSongInfo:{},queue:new R,a:!1}},created:function(){this.fetchQueue()},methods:{fetchQueue:function(){for(var t=this,e=0;e<5;e++)fetch(this.PROTO+this.ROUTE+"/random",{method:"GET",redirect:"follow"}).then((function(t){return t.json()})).then((function(e){e.isActive=!1,t.queue.push(e)}))},fetchAndPlay:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.currentSong.pause(),e.currentSong=new Audio(e.PROTO+e.ROUTE+"/song/"+t),e.currentSong.type="audio/mp3",n.prev=3,n.next=6,e.currentSong.play();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](3),alert("Failed to play: "+n.t0);case 11:case"end":return n.stop()}}),n,null,[[3,8]])})))()},goto:function(t){this.queue.goto(t),this.currentSongQID=t,this.currentSongInfo=this.queue.get(0),this.fetchAndPlay(this.queue.get(0).songid),this.playerUpdate()},toggle:function(){this.currentSong.paused?this.currentSong.play():this.currentSong.pause(),this.playerUpdate()},playerUpdate:function(){this.a=!this.a}}},B=U,J=(n("034f"),Object(h["a"])(B,i,o,!1,null,null,null)),L=J.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(L)}}).$mount("#app")},"6bc6":function(t,e,n){"use strict";var r=n("e001"),i=n.n(r);i.a},"85ec":function(t,e,n){},ac69:function(t,e,n){"use strict";var r=n("4b44"),i=n.n(r);i.a},af88:function(t,e,n){"use strict";var r=n("42c6"),i=n.n(r);i.a},bccc:function(t,e,n){"use strict";var r=n("16e7"),i=n.n(r);i.a},e001:function(t,e,n){},fdbd:function(t,e,n){}});
//# sourceMappingURL=app.851f6b7a.js.map